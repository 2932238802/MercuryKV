import{r as t,c as l,o as r,a as s,w as b,b as a,d as u,v as i,n as T,u as E,S as d}from"./index-0COXjatw.js";import{s as x}from"./request-CUuHo27c.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"page-body"},N={class:"form-container sign-up-container"},$={key:0,class:"warning_word"},q={key:1,class:"warning_word"},z={key:2,class:"warning_word"},B={class:"form-container sign-in-container"},O={key:0,class:"warning_word"},P={key:1,class:"warning_word"},Z={__name:"RegisterAndLogin",setup(D){const v=t(""),p=t(""),g=t(""),m=t(""),f=t(""),c=t(!1),_=t(!1),w=t(!1),y=t(!1),k=t(!1),S={LOGIN:"/Login/login",REGISTER:"/Register/register"},h=E(),I=t(!1),C=()=>{w.value=!1,y.value=!1,k.value=!1,I.value=!1},A=()=>{c.value=!1,_.value=!1,I.value=!0},R=()=>{h.push({name:"Index"})},U=async()=>{if(c.value=!1,_.value=!1,!g.value){c.value=!0;return}if(!m.value){_.value=!0;return}try{const n={username:g.value,password:m.value},e=await x.post(S.LOGIN,n);localStorage.setItem("AuthToken",e.token),localStorage.setItem("UserId",e.user_id),h.push({name:"Mercury"}).catch(o=>{console.error("路由跳转失败:",o),d(`路由跳转失败: ${o.message}`)}),d(e.message||"登录成功")}catch(n){console.error("登录失败:",n.message),d(`登录失败：${n.message}`)}},V=async()=>{if(w.value=!1,y.value=!1,k.value=!1,!v.value){w.value=!0;return}if(!p.value){y.value=!0;return}if(!f.value){k.value=!0;return}try{const n={username:v.value,password:p.value,email:f.value},e=await x.post(S.REGISTER,n),o=e.token,L=e.user_id;localStorage.setItem("AuthToken",o),localStorage.setItem("UserId",L),h.push({name:"Mercury"}),d(e.message)}catch(n){console.error("注册失败:",n.message),d(`注册失败：${n.message}`)}};return(n,e)=>(r(),l("div",G,[s("div",{class:T(["container",{"right-panel-active":I.value}])},[s("div",N,[s("div",{class:"return-button",onClick:R}," Return "),s("form",{onSubmit:e[3]||(e[3]=b(()=>{},["prevent"]))},[e[7]||(e[7]=s("h1",null,"创建账户",-1)),a(s("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o),minlength:"8",maxlength:"14",required:""},null,512),[[i,v.value]]),a(s("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":e[1]||(e[1]=o=>f.value=o),required:""},null,512),[[i,f.value]]),a(s("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[2]||(e[2]=o=>p.value=o),minlength:"8",maxlength:"20",pattern:"^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,20}$",required:""},null,512),[[i,p.value]]),w.value?(r(),l("div",$,"用户名输入格式错误!")):u("",!0),y.value?(r(),l("div",q,"密码输入格式错误!")):u("",!0),k.value?(r(),l("div",z,"邮箱输入格式错误!")):u("",!0),s("button",{onClick:V},"注 册")],32)]),s("div",B,[s("div",{class:"return-button",onClick:R}," Return "),s("form",{onSubmit:e[6]||(e[6]=b(()=>{},["prevent"]))},[e[8]||(e[8]=s("h1",null,"登 录",-1)),a(s("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":e[4]||(e[4]=o=>g.value=o)},null,512),[[i,g.value]]),a(s("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[5]||(e[5]=o=>m.value=o)},null,512),[[i,m.value]]),c.value?(r(),l("div",O,"用户名输入格式错误!")):u("",!0),_.value?(r(),l("div",P,"密码输入格式错误!")):u("",!0),s("button",{onClick:U},"登 录")],32)]),s("div",{class:"overlay-container"},[s("div",{class:"overlay"},[s("div",{class:"overlay-panel overlay-left"},[e[9]||(e[9]=s("h1",null,"欢迎回来!",-1)),e[10]||(e[10]=s("p",null,"为了与我们保持联系",-1)),e[11]||(e[11]=s("p",null,"请使用您的个人信息登录",-1)),s("button",{class:"ghost",onClick:C},"去登录")]),s("div",{class:"overlay-panel overlay-right"},[e[12]||(e[12]=s("h1",null,"你好, 朋友!",-1)),e[13]||(e[13]=s("p",null,"输入您的个人详细信息",-1)),e[14]||(e[14]=s("p",null,"开始与我们的旅程",-1)),s("button",{class:"ghost",onClick:A},"去注册")])])])],2)]))}},J=M(Z,[["__scopeId","data-v-38870b24"]]);export{J as default};
