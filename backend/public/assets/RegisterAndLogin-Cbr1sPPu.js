import{_ as U,b as l,c as n,a as s,w as R,d as r,e as u,v as i,n as E,r as I,o as a}from"./index-DwuVVf4k.js";import{s as b}from"./request-BK_1Swhf.js";const G={class:"page-body"},M={class:"form-container sign-up-container"},N={key:0,class:"warning_word"},B={key:1,class:"warning_word"},O={key:2,class:"warning_word"},P={class:"form-container sign-in-container"},$={key:0,class:"warning_word"},z={key:1,class:"warning_word"},D={__name:"RegisterAndLogin",setup(H){const v=l(""),d=l(""),p=l(""),g=l(""),f=l(""),m=l(!1),_=l(!1),c=l(!1),w=l(!1),y=l(!1),S={LOGIN:"/Login/login",REGISTER:"/Register/register"},k=l(!1),x=()=>{c.value=!1,w.value=!1,y.value=!1,k.value=!1},C=()=>{m.value=!1,_.value=!1,k.value=!0},h=()=>{I.push({name:"Index"})},A=async()=>{if(m.value=!1,_.value=!1,!p.value){m.value=!0;return}if(!g.value){_.value=!0;return}try{const o={username:p.value,password:g.value},e=await b.post(S.LOGIN,o),t=e.token;localStorage.setItem("AuthToken",t),I.push({name:"Mercury"}),alert(e.message)}catch(o){console.error("登录失败:",o.message),alert(`登录失败：${o.message}`)}},T=async()=>{c.value=!1,w.value=!1,y.value=!1;let o=!1;if(v.value||(c.value=!0,o=!0),d.value||(w.value=!0,o=!0),f.value||(y.value=!0,o=!0),o!=!0)try{const e={username:v.value,password:d.value,email:f.value},t=await b.post(S.REGISTER,e),V=t.token,L=t.user_id;localStorage.setItem("AuthToken",V),localStorage.setItem("AuthToken",L),I.push({name:"Mercury"}),alert(t.message)}catch(e){console.error("注册失败:",e.message),alert(`注册失败：${e.message}`)}};return(o,e)=>(a(),n("div",G,[s("div",{class:E(["container",{"right-panel-active":k.value}])},[s("div",M,[s("div",{class:"return-button",onClick:h}," Return "),s("form",{onSubmit:e[3]||(e[3]=R(()=>{},["prevent"]))},[e[7]||(e[7]=s("h1",null,"创建账户",-1)),r(s("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":e[0]||(e[0]=t=>v.value=t)},null,512),[[i,v.value]]),r(s("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t)},null,512),[[i,f.value]]),r(s("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[2]||(e[2]=t=>d.value=t)},null,512),[[i,d.value]]),c.value?(a(),n("div",N,"用户名输入格式错误!")):u("",!0),w.value?(a(),n("div",B,"密码输入格式错误!")):u("",!0),y.value?(a(),n("div",O,"邮箱输入格式错误!")):u("",!0),s("button",{onClick:T},"注 册")],32)]),s("div",P,[s("div",{class:"return-button",onClick:h}," Return "),s("form",{onSubmit:e[6]||(e[6]=R(()=>{},["prevent"]))},[e[8]||(e[8]=s("h1",null,"登 录",-1)),r(s("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":e[4]||(e[4]=t=>p.value=t)},null,512),[[i,p.value]]),r(s("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[5]||(e[5]=t=>g.value=t)},null,512),[[i,g.value]]),m.value?(a(),n("div",$,"用户名输入格式错误!")):u("",!0),_.value?(a(),n("div",z,"密码输入格式错误!")):u("",!0),s("button",{onClick:A},"登 录")],32)]),s("div",{class:"overlay-container"},[s("div",{class:"overlay"},[s("div",{class:"overlay-panel overlay-left"},[e[9]||(e[9]=s("h1",null,"欢迎回来!",-1)),e[10]||(e[10]=s("p",null,"为了与我们保持联系",-1)),e[11]||(e[11]=s("p",null,"请使用您的个人信息登录",-1)),s("button",{class:"ghost",onClick:x},"去登录")]),s("div",{class:"overlay-panel overlay-right"},[e[12]||(e[12]=s("h1",null,"你好, 朋友!",-1)),e[13]||(e[13]=s("p",null,"输入您的个人详细信息",-1)),e[14]||(e[14]=s("p",null,"开始与我们的旅程",-1)),s("button",{class:"ghost",onClick:C},"去注册")])])])],2)]))}},F=U(D,[["__scopeId","data-v-746fdc80"]]);export{F as default};
