import{b as t,c as n,o as a,a as s,w as b,d as r,e as u,v as i,n as E,r as I,S as k}from"./index-DJNRFwTr.js";import{s as C}from"./request-rDDBDBrE.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"page-body"},N={class:"form-container sign-up-container"},B={key:0,class:"warning_word"},O={key:1,class:"warning_word"},P={key:2,class:"warning_word"},$={class:"form-container sign-in-container"},z={key:0,class:"warning_word"},D={key:1,class:"warning_word"},H={__name:"RegisterAndLogin",setup(j){const v=t(""),d=t(""),p=t(""),g=t(""),m=t(""),f=t(!1),_=t(!1),c=t(!1),w=t(!1),y=t(!1),h={LOGIN:"/Login/login",REGISTER:"/Register/register"},S=t(!1),x=()=>{c.value=!1,w.value=!1,y.value=!1,S.value=!1},U=()=>{f.value=!1,_.value=!1,S.value=!0},R=()=>{I.push({name:"Index"})},V=async()=>{if(f.value=!1,_.value=!1,!p.value){f.value=!0;return}if(!g.value){_.value=!0;return}try{const l={username:p.value,password:g.value},e=await C.post(h.LOGIN,l),o=e.token;localStorage.setItem("AuthToken",o),I.push({name:"Mercury"}),k(e.message)}catch(l){console.error("登录失败:",l.message),k(`登录失败：${l.message}`)}},A=async()=>{c.value=!1,w.value=!1,y.value=!1;let l=!1;if(v.value||(c.value=!0,l=!0),d.value||(w.value=!0,l=!0),m.value||(y.value=!0,l=!0),l!=!0)try{const e={username:v.value,password:d.value,email:m.value},o=await C.post(h.REGISTER,e),L=o.token,T=o.user_id;localStorage.setItem("AuthToken",L),localStorage.setItem("UserId",T),I.push({name:"Mercury"}),k(o.message)}catch(e){console.error("注册失败:",e.message),k(`注册失败：${e.message}`)}};return(l,e)=>(a(),n("div",G,[s("div",{class:E(["container",{"right-panel-active":S.value}])},[s("div",N,[s("div",{class:"return-button",onClick:R}," Return "),s("form",{onSubmit:e[3]||(e[3]=b(()=>{},["prevent"]))},[e[7]||(e[7]=s("h1",null,"创建账户",-1)),r(s("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":e[0]||(e[0]=o=>v.value=o)},null,512),[[i,v.value]]),r(s("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":e[1]||(e[1]=o=>m.value=o)},null,512),[[i,m.value]]),r(s("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[2]||(e[2]=o=>d.value=o)},null,512),[[i,d.value]]),c.value?(a(),n("div",B,"用户名输入格式错误!")):u("",!0),w.value?(a(),n("div",O,"密码输入格式错误!")):u("",!0),y.value?(a(),n("div",P,"邮箱输入格式错误!")):u("",!0),s("button",{onClick:A},"注 册")],32)]),s("div",$,[s("div",{class:"return-button",onClick:R}," Return "),s("form",{onSubmit:e[6]||(e[6]=b(()=>{},["prevent"]))},[e[8]||(e[8]=s("h1",null,"登 录",-1)),r(s("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":e[4]||(e[4]=o=>p.value=o)},null,512),[[i,p.value]]),r(s("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[5]||(e[5]=o=>g.value=o)},null,512),[[i,g.value]]),f.value?(a(),n("div",z,"用户名输入格式错误!")):u("",!0),_.value?(a(),n("div",D,"密码输入格式错误!")):u("",!0),s("button",{onClick:V},"登 录")],32)]),s("div",{class:"overlay-container"},[s("div",{class:"overlay"},[s("div",{class:"overlay-panel overlay-left"},[e[9]||(e[9]=s("h1",null,"欢迎回来!",-1)),e[10]||(e[10]=s("p",null,"为了与我们保持联系",-1)),e[11]||(e[11]=s("p",null,"请使用您的个人信息登录",-1)),s("button",{class:"ghost",onClick:x},"去登录")]),s("div",{class:"overlay-panel overlay-right"},[e[12]||(e[12]=s("h1",null,"你好, 朋友!",-1)),e[13]||(e[13]=s("p",null,"输入您的个人详细信息",-1)),e[14]||(e[14]=s("p",null,"开始与我们的旅程",-1)),s("button",{class:"ghost",onClick:U},"去注册")])])])],2)]))}},K=M(H,[["__scopeId","data-v-75593833"]]);export{K as default};
