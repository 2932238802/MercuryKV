import{_ as N,b as v,l as b,c as o,a as e,e as h,k as _,F as w,j as C,w as V,t as r,d as p,v as g,u as H,o as i}from"./index-DwuVVf4k.js";const T={class:"kv-manager-page"},I={class:"content-card"},M={class:"table-wrapper"},P={class:"kv-table"},R={class:"value-cell"},U={class:"value-text"},E={class:"actions-cell"},$=["onClick"],B=["onClick"],j=["onClick"],F={key:0},q={colspan:"5",class:"empty-state"},G={key:0,class:"modal-overlay"},J={class:"modal-content"},O={class:"form-group"},z={class:"form-group"},Q={class:"form-group"},W={__name:"Mercury",setup(X){const n=v([{id:1,key:"my-app:config:theme",value:'"dark"',tags:["config","ui"],updated_at:"2023-10-27 10:30:15"},{id:2,key:"user:101:permissions",value:'["read", "write", "comment"]',tags:["user","security"],updated_at:"2023-10-26 18:05:01"}]),d=v(!1),c=v(!1),a=v(null),f=H(),x=b(()=>c.value?"Edit KV Pair":"Create KV Pair"),y=b({get(){return a.value?.tags?.join(",")||""},set(l){a.value&&(a.value.tags=l.split(/[,\s\.，。]+/).map(t=>t.trim()).filter(t=>t))}});function S(){f.push({name:"Index"})}function A(){localStorage.removeItem("AuthToken"),f.push({name:"RegisterAndLogin"})}function m(){c.value=!1,a.value={key:"",value:"",tags:[]},d.value=!0}function D(l){c.value=!0,a.value={...l},d.value=!0}function k(){d.value=!1,a.value=null}async function K(){if(a.value){if(c.value){console.log("Updating item:",a.value);const l=n.value.findIndex(t=>t.id===a.value.id);l!==-1&&(n.value[l]={...a.value,updated_at:new Date().toLocaleString()})}else{console.log("Creating new item:",a.value);const l={...a.value,id:Date.now(),updated_at:new Date().toLocaleString()};n.value.unshift(l)}k()}}function L(l){confirm(`Are you sure you want to delete the key "${l.key}"?`)&&(console.log("Deleting item:",l),n.value=n.value.filter(t=>t.id!==l.id))}return(l,t)=>(i(),o("div",T,[e("div",I,[e("button",{class:"btn-return",onClick:S,title:"Go back"},t[3]||(t[3]=[e("i",{class:"fas fa-arrow-left"},null,-1)])),e("header",{class:"kv-manager-header"},[t[6]||(t[6]=e("h1",null,"KV Store",-1)),e("div",{class:"toolbar"},[t[5]||(t[5]=e("input",{type:"text",class:"search-input",placeholder:"Search by key or tag...","aria-label":"Search Key-Value pairs"},null,-1)),e("button",{class:"btn-primary",onClick:m}," + Add New "),e("button",{class:"btn-ghost",onClick:A,title:"Logout and login again"},t[4]||(t[4]=[e("i",{class:"fas fa-sign-out-alt"},null,-1),_(" Re-Login ")]))])]),e("div",M,[e("table",P,[t[11]||(t[11]=e("thead",null,[e("tr",null,[e("th",{class:"col-key"},"Key"),e("th",{class:"col-value"},"Value"),e("th",{class:"col-tags"},"Tags"),e("th",{class:"col-updated"},"Last Updated"),e("th",{class:"col-actions"},"Actions")])],-1)),e("tbody",null,[(i(!0),o(w,null,C(n.value,s=>(i(),o("tr",{key:s.id},[e("td",null,r(s.key),1),e("td",R,[e("span",U,r(s.value),1)]),e("td",null,[(i(!0),o(w,null,C(s.tags,u=>(i(),o("span",{key:u,class:"tag"},r(u),1))),128))]),e("td",null,r(s.updated_at),1),e("td",E,[e("button",{class:"btn-icon",title:"View History",onClick:u=>l.handleViewHistory(s)},t[7]||(t[7]=[e("i",{class:"fas fa-history"},null,-1)]),8,$),e("button",{class:"btn-icon",title:"Edit",onClick:u=>D(s)},t[8]||(t[8]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]),8,B),e("button",{class:"btn-icon btn-danger",title:"Delete",onClick:u=>L(s)},t[9]||(t[9]=[e("i",{class:"fas fa-trash-alt"},null,-1)]),8,j)])]))),128)),n.value.length?h("",!0):(i(),o("tr",F,[e("td",q,[t[10]||(t[10]=_(" No Key-Value pairs found. ")),e("a",{href:"#",onClick:V(m,["prevent"])},"Add one now!")])]))])])]),t[12]||(t[12]=e("footer",{class:"kv-manager-footer"},[e("div",{class:"pagination"},[e("span",null,"Page 1 of 1"),e("button",{class:"btn-ghost",disabled:""},"< Prev"),e("button",{class:"btn-ghost",disabled:""},"Next >")])],-1))]),d.value?(i(),o("div",G,[e("div",J,[e("form",{onSubmit:V(K,["prevent"])},[e("h1",null,r(x.value),1),e("div",O,[p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.key=s),id:"kv-key",type:"text",placeholder:"Key (e.g., app:settings:retries)",required:""},null,512),[[g,a.value.key]])]),e("div",z,[p(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.value=s),id:"kv-value",rows:"5",placeholder:"Value (string or valid JSON)"},null,512),[[g,a.value.value]])]),e("div",Q,[p(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),id:"kv-tags",type:"text",placeholder:"Tags (comma separated, e.g., api,config,user)"},null,512),[[g,y.value]])]),e("div",{class:"modal-actions"},[e("button",{type:"button",class:"btn-ghost",onClick:k},"Cancel"),t[13]||(t[13]=e("button",{type:"submit",class:"btn-primary"},"Save",-1))])],32)])])):h("",!0)]))}},Z=N(W,[["__scopeId","data-v-c06381d1"]]);export{Z as default};
