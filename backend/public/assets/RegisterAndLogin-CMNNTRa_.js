import{b as n,c as l,o as a,a as s,w as b,d as r,e as u,v as i,n as E,r as S,S as k}from"./index-c-ZVSFtC.js";import{s as x}from"./request-rDDBDBrE.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={class:"page-body"},N={class:"form-container sign-up-container"},q={key:0,class:"warning_word"},z={key:1,class:"warning_word"},B={key:2,class:"warning_word"},$={class:"form-container sign-in-container"},O={key:0,class:"warning_word"},P={key:1,class:"warning_word"},Z={__name:"RegisterAndLogin",setup(D){const d=n(""),v=n(""),p=n(""),g=n(""),m=n(""),f=n(!1),_=n(!1),c=n(!1),w=n(!1),y=n(!1),I={LOGIN:"/Login/login",REGISTER:"/Register/register"},h=n(!1),C=()=>{c.value=!1,w.value=!1,y.value=!1,h.value=!1},A=()=>{f.value=!1,_.value=!1,h.value=!0},R=()=>{S.push({name:"Index"})},U=async()=>{if(f.value=!1,_.value=!1,!p.value){f.value=!0;return}if(!g.value){_.value=!0;return}try{const o={username:p.value,password:g.value},e=await x.post(I.LOGIN,o),t=e.token;localStorage.setItem("AuthToken",t),S.push({name:"Mercury"}),k(e.message)}catch(o){console.error("登录失败:",o.message),k(`登录失败：${o.message}`)}},V=async()=>{c.value=!1,w.value=!1,y.value=!1;let o=!1;if(d.value||(c.value=!0,o=!0),v.value||(w.value=!0,o=!0),m.value||(y.value=!0,o=!0),o!=!0)try{const e={username:d.value,password:v.value,email:m.value},t=await x.post(I.REGISTER,e),L=t.token,T=t.user_id;localStorage.setItem("AuthToken",L),localStorage.setItem("UserId",T),S.push({name:"Mercury"}),k(t.message)}catch(e){console.error("注册失败:",e.message),k(`注册失败：${e.message}`)}};return(o,e)=>(a(),l("div",G,[s("div",{class:E(["container",{"right-panel-active":h.value}])},[s("div",N,[s("div",{class:"return-button",onClick:R}," Return "),s("form",{onSubmit:e[3]||(e[3]=b(()=>{},["prevent"]))},[e[7]||(e[7]=s("h1",null,"创建账户",-1)),r(s("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),minlength:"8",maxlength:"14",required:""},null,512),[[i,d.value]]),r(s("input",{type:"email",placeholder:"邮箱","onUpdate:modelValue":e[1]||(e[1]=t=>m.value=t),required:""},null,512),[[i,m.value]]),r(s("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[2]||(e[2]=t=>v.value=t),minlength:"8",maxlength:"20",pattern:"^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,20}$",required:""},null,512),[[i,v.value]]),c.value?(a(),l("div",q,"用户名输入格式错误!")):u("",!0),w.value?(a(),l("div",z,"密码输入格式错误!")):u("",!0),y.value?(a(),l("div",B,"邮箱输入格式错误!")):u("",!0),s("button",{onClick:V},"注 册")],32)]),s("div",$,[s("div",{class:"return-button",onClick:R}," Return "),s("form",{onSubmit:e[6]||(e[6]=b(()=>{},["prevent"]))},[e[8]||(e[8]=s("h1",null,"登 录",-1)),r(s("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":e[4]||(e[4]=t=>p.value=t)},null,512),[[i,p.value]]),r(s("input",{type:"password",placeholder:"密码","onUpdate:modelValue":e[5]||(e[5]=t=>g.value=t)},null,512),[[i,g.value]]),f.value?(a(),l("div",O,"用户名输入格式错误!")):u("",!0),_.value?(a(),l("div",P,"密码输入格式错误!")):u("",!0),s("button",{onClick:U},"登 录")],32)]),s("div",{class:"overlay-container"},[s("div",{class:"overlay"},[s("div",{class:"overlay-panel overlay-left"},[e[9]||(e[9]=s("h1",null,"欢迎回来!",-1)),e[10]||(e[10]=s("p",null,"为了与我们保持联系",-1)),e[11]||(e[11]=s("p",null,"请使用您的个人信息登录",-1)),s("button",{class:"ghost",onClick:C},"去登录")]),s("div",{class:"overlay-panel overlay-right"},[e[12]||(e[12]=s("h1",null,"你好, 朋友!",-1)),e[13]||(e[13]=s("p",null,"输入您的个人详细信息",-1)),e[14]||(e[14]=s("p",null,"开始与我们的旅程",-1)),s("button",{class:"ghost",onClick:A},"去注册")])])])],2)]))}},J=M(Z,[["__scopeId","data-v-4906e3f5"]]);export{J as default};
